set(PROJECT_DIR ${MICROPY_DIR}/ports/esp32)
if(EXISTS ${PROJECT_DIR}/main_esp32s3/CMakeLists.txt)
    include(${PROJECT_DIR}/main_esp32s3/CMakeLists.txt)
elseif(EXISTS ${PROJECT_DIR}/main/CMakeLists.txt)
    include(${PROJECT_DIR}/main/CMakeLists.txt)
else()
    message(FATAL_ERROR "main CMakeLists.txt not found")
endif()